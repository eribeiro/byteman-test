RULE Trace Threadname
CLASS br.edu.eribeiro.Foo
METHOD call
AT ENTRY
IF true
DO traceln("br.edu.eribeiro.Foo.call() was called!");
ENDRULE


RULE count ouput writes
CLASS java.io.FileOutputStream
METHOD write(byte[])
IF TRUE
DO incrementCounter("outputstream-write")
ENDRULE

RULE output throws exception
CLASS java.io.FileOutputStream
METHOD write(byte[])
BIND counter = readCounter("outputstream-write")
IF counter == 2
DO
   traceln("throwing exception on second");
   throw java.io.IOException("Throwing exception on the second write() call");
ENDRULE
